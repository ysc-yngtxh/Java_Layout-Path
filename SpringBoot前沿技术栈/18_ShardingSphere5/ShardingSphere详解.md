

## ShardingSphere参考：https://shardingsphere.apache.org/document/current/cn/quick-start/

## 一、数据库分区
  <h4>
     <figure>      
        一般情况下我们创建的表对应一组存储文件，使用MyISAM存储引擎时是一个.MYI和.MYD文件，
        使用Innodb存储引擎时是一个.ibd和.frm（表结构）文件。<br/><br/>
        当数据量较大时（一般千万条记录级别以上），MySQL的性能就会开始下降，这时我们就需要将数据分散到多组存储文件，保证其单个文件的执行效率。<br/>
          <hr/>
        <h3>分区表：</h3>将一个表的数据分成多个区块，这些区块可以在同一个磁盘上，也可以在不同的磁盘上。<br/>
        分区表由多个分区组成，每个分区都是独立的表，除了分区键外，表结构与数据列必须完全相同。
        <h3>分区键：</h3>用于决定行数据的分区，分区表中的数据行通过分区键的值，映射到某一个分区中。<br/>
        分区键用于组织每个分区的数据，每个分区内的数据都是有序的，不同分区之间的数据是无序的。    <h3>表分区结果：</h3>
        <figure>
           逻辑数据分割<br/>
           逻辑数据分割<br/>
           提高单一的写和读应用速度<br/>
           提高分区范围读查询的速度<br/>
           分割数据能够有多个不同的物理文件路径<br/>
           高效的保存历史数据
        </figure>    
        <h3>分区表缺陷：</h3>
        <figure>
           数据库的分区表既然能实现数据分割，为什么大部分互联网还是更多的选择自己分库分表来水平扩展咧？
           <figure>
               分区表，分区键设计不太灵活，如果不走分区键，很容易出现全表锁。一旦数据并发量上来，如果在分区表实施关联，就是一个灾难。<br/>
               自己分库分表，自己掌控业务场景与访问模式，可控。分区表，研发写了一个sql，都不确定mysql是怎么玩的，不太可控
           </figure>
        </figure>
     </figure>
  </h4>

## 二、分库分表
   <h4>
     <figure> 
        <h3>随着业务的发展，业务越来越复杂，应用的模块越来越多，总的数据量很大，高并发读写操作均超过单个数据库服务器的处理能力怎么办？</h3>
        &ensp;&ensp;&ensp;&ensp;这个时候就出现了数据分片，数据分片指按照某个维度将存放在单一数据库中的数据分散地存放至多个数据库或表中。<br/>
        &ensp;&ensp;&ensp;&ensp;而数据分片的有效手段就是对关系型数据库进行分库和分表。
        <figure>
          区别于分区的是，分区一般都是放在单机里的，用的比较多的是时间范围分区，方便归档。<br/>
          分库分表需要代码实现，分区则是mysql内部实现。分库分表和分区并不冲突，可以结合使用
        </figure>      
        <h3>分表：一种垂直拆分，另一种水平拆分。</h3>
        <figure>
          <h4>垂直拆分</h4>
          <h6>垂直分表，通常是按照业务功能的使用频次，把主要的、热门的字段放在一起做为主要表。
              然后把不常用的，按照各自的业务属性进行聚集，拆分到不同的次要表中；主要表和次要表的关系一般都是一对一的。
          </h6>
        <h4>水平拆分(数据分片)</h4>
        <h6>单表的容量不超过500W，否则建议水平拆分。
        是把一个表复制成同样表结构的不同表，然后把数据按照一定的规则划分，分别存储到这些表中，从而保证单表的容量不会太大，提升性能；
        当然这些结构一样的表，可以放在一个或多个数据库中。
        </h6>
        </figure>
        <h3>分库</h3>
        <figure>
          <h4>一个库里表太多了，导致了海量数据，系统性能下降，把原本存储于一个库的表拆分存储到多个库上， 通常是将表按照功能模块、关系密切程度划分出来，部署到不同库上。</h4>
          <h5>优点：</h5>
          <figure>
            <h6>减少增量数据写入时的锁对查询的影响</h6>
            <h6>由于单表数量下降，常见的查询操作由于减少了需要扫描的记录，使得单表单次查询所需的检索行数变少，减少了磁盘IO，时延变短</h6>
            <h6>但是它无法解决单表数据量太大的问题</h6>
          </figure>
        </figure>
        <h3>分库分表后的难题</h3>
        <figure>
          <h4>分布式事务的问题，数据的完整性和一致性问题。</h4>
        </figure>
     </figure>
   </h4>

